<%- include('templates/headerAfterLogin') %>

    <!--
  Dashboard page EJS.
  Author: Ethan Nguyen
  Description: Dashboard page used to display all of the user's
  energy consumption/carbon emissions through graphs.
-->

    <link rel="stylesheet" href="/css/dashboard.css">

    <h2>Dashboard</h2>
    <div class="container-fluid">
        <div class="row d-flex align-items-center justify-content-center">
            <div class="col-12 col-md-6 mb-4">
                <!-- new -->
                <div class="card text-center border">
                    <h5 class="card-header">Largest Energy Consumers</h5>
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <a class="nav-link active text-success" href="#">Week</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#">Month</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#">Year</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                        <div id="piechart"></div>
                        <% if (user) { %>
                            <ul>
                              <% user.device_list.forEach(function(device) { %>
                                <li>
                                  <h3><%= device.name %></h3>
                                  <p>kWh: <%= device.kWh %></p>
                                  <p>Usage: <%= device.usage %></p>
                                  <p>Wattage: <%= device.wattage %></p>
                                </li>
                              <% }) %>
                            </ul>
                          <% } else { %>
                            <p>No devices found.</p>
                          <% } %>
                                                   
                    </div>
                </div>
            </div>
        </div>
        <div class="row d-flex align-items-center justify-content-center">
            <div class="col-12 col-md-6 mb-4">
                <!-- new -->
                <div class="card text-center border">
                    <h5 class="card-header">Largest Energy Consumers</h5>
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs">
                            <li class="nav-item">
                                <a class="nav-link active text-success" href="#">Week</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#">Month</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link text-success" href="#">Year</a>
                            </li>
                        </ul>
                    </div>
                    <div class="card-body">
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="/js/dashboard.js"></script>
<!-- <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = google.visualization.arrayToDataTable([
            ['Task', 'Hours per Day'],
            [`${<%= device_list %>}`,     11],
            ['Eat',      2],
            ['Commute',  2],
            ['Watch TV', 2],
            ['Sleep',    7]
        ]);

        var options = {
            legend: { position: 'bottom' },
            width: '100%',
            height: '100%'
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }
    </script> -->

<%- include('templates/footerAfterLogin') %>